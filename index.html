<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SunriseRP – Website</title>
<style>
body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    color: #fff;
    background: url('sunriserp.png') center/cover fixed no-repeat;
}
header {
    background: rgba(0,0,0,0.6);
    text-align: center;
    padding: 20px;
    font-size: 24px;
    letter-spacing: 2px;
    text-shadow: 0 0 10px #ffbb55;
}
nav {
    text-align: center;
    background: rgba(0,0,0,0.4);
    padding: 10px;
}
nav button {
    background: rgba(255,255,255,0.15);
    border: none;
    color: #fff;
    padding: 10px 20px;
    margin: 5px;
    border-radius: 5px;
    cursor: pointer;
    transition: 0.3s;
}
nav button:hover {
    background: rgba(255,200,120,0.4);
}
section {
    display: none;
    padding: 20px;
    margin: 20px auto;
    max-width: 1000px;
    background: rgba(0,0,0,0.55);
    border-radius: 10px;
}
section.active {
    display: block;
}
h2, h3 {
    text-align: center;
    color: #ffbb55;
    text-shadow: 0 0 10px #ffbb55;
}
table {
    width: 100%;
    border-collapse: collapse;
    color: #fff;
}
th, td {
    border: 1px solid rgba(255,255,255,0.3);
    padding: 8px;
    text-align: center;
}
input, select, textarea, button {
    padding: 8px;
    border: none;
    border-radius: 4px;
    margin: 5px 0;
    font-family: inherit;
}
textarea { width: 95%; min-height: 60px; }
.avatar { border-radius: 50%; width: 50px; height: 50px; object-fit: cover; }
.save-btn, .login-form button {
    background: #ffbb55;
    color: #000;
    cursor: pointer;
}
.save-btn:hover, .login-form button:hover { background: #ffd480; }
form > div { margin-bottom: 10px; }
.team-accounts-table img { width:40px; height:40px; border-radius:50%; object-fit:cover; }
.panel-content { margin-top: 20px; }
button.action-btn { background: #ffbb55; color: #000; border-radius: 4px; padding: 6px 12px; cursor: pointer; transition: 0.3s; }
button.action-btn:hover { background: #ffd480; }
.status-select { padding:4px; border-radius:4px; }
.notiz-input { width:90%; padding:4px; border-radius:4px; }
</style>
</head>
<body>
<header>☀️ Sunrise Roleplay – Minecraft RP auf hohem Niveau</header>
<nav>
    <button onclick="showSection('regelwerk')">Regelwerk</button>
    <button onclick="showSection('news')">News</button>
    <button onclick="showSection('team')">Team</button>
    <button onclick="showSection('bewerbung')">Bewerben</button>
    <button onclick="showSection('entbannung')">Entbannung</button>
    <button onclick="showSection('panel')">Admin Panel</button>
</nav>

<!-- Regelwerk -->
<section id="regelwerk" class="active">
<h2>Regelwerk SunriseRP</h2>
<pre style="white-space: pre-wrap; font-family: inherit;">Dein Regelwerk</pre>
</section>

<!-- News -->
<section id="news">
<h2>News</h2>
<p>Hier erscheinen die News, die du im Admin Panel erstellst.</p>
<table class="news-table">
<thead><tr><th>Datum</th><th>Bild</th><th>Text</th></tr></thead>
<tbody></tbody>
</table>
</section>

<!-- Team -->
<section id="team">
<h2>Teammitglieder</h2>
<table class="team-table">
<thead>
<tr><th>Avatar</th><th>Name</th><th>Rolle</th></tr>
</thead>
<tbody></tbody>
</table>
</section>

<!-- Bewerben -->
<section id="bewerbung">
<h2>Bewerbung einreichen</h2>
<form class="bewerbung-form">
<div>
<select class="bewerbungs-art" required onchange="togglePositionField()">
<option value="Firmenbewerbung">Firmenbewerbung</option>
<option value="Teambewerbung">Teambewerbung</option>
</select>
</div>
<div class="team-positionen" style="display:none;">
<select class="bewerbung-position" required>
<option value="Test Supporter">Test Supporter</option>
<option value="Test Builder">Test Builder</option>
<option value="Test Developer">Test Developer</option>
<option value="Test Designer">Test Designer</option>
<option value="Test Content Creator">Test Content Creator</option>
</select>
</div>
<div><input type="text" class="bewerbung-discord" placeholder="Discord Name" required></div>
<div><input type="text" class="bewerbung-minecraft" placeholder="Minecraft Name" required></div>
<div><input type="email" class="bewerbung-email" placeholder="E-Mail" required></div>
<div><textarea class="bewerbung-text" placeholder="Warum möchtest du dich bewerben?" required></textarea></div>
<button type="submit">Absenden</button>
</form>
</section>

<!-- Entbannung -->
<section id="entbannung">
<h2>Entbannungsantrag</h2>
<form class="entbannung-form">
<div><input type="text" class="entbannung-minecraft" placeholder="Minecraft Name" required></div>
<div><input type="text" class="entbannung-discord" placeholder="Discord Name" required></div>
<div><input type="email" class="entbannung-email" placeholder="E-Mail" required></div>
<div>
<label><input type="checkbox" class="entbannung-discordban"> Auch vom Discord gebannt?</label>
</div>
<div><textarea class="entbannung-text" placeholder="Begründung" required></textarea></div>
<button type="submit">Absenden</button>
</form>
</section>

<!-- Admin Panel -->
<section id="panel">
<h2>Admin Panel</h2>
<form class="login-form">
<div><input type="text" class="login-user" placeholder="Benutzername" required></div>
<div><input type="password" class="login-pass" placeholder="Passwort" required></div>
<button type="submit">Login</button>
</form>

<div class="panel-content" style="display:none;">
<h3>News erstellen</h3>
<form class="news-form">
<div><input type="file" class="news-bild" accept="image/png, image/jpeg"></div>
<div><textarea class="news-text" placeholder="News Text" required></textarea></div>
<button type="submit">News erstellen</button>
</form>

<h3>Bewerbungen</h3>
<table class="panel-bewerbungen">
<thead>
<tr><th>Datum</th><th>Art</th><th>Discord</th><th>Minecraft</th><th>Email</th><th>Position</th><th>Text</th><th>Notiz</th><th>Status</th><th>Bearbeitet von</th></tr>
</thead>
<tbody></tbody>
</table>

<h3>Entbannungsanträge</h3>
<table class="panel-entbannungen">
<thead>
<tr><th>Datum</th><th>Minecraft</th><th>Discord</th><th>Email</th><th>Discord-Ban?</th><th>Text</th><th>Notiz</th><th>Status</th><th>Bearbeiter</th></tr>
</thead>
<tbody></tbody>
</table>

<h3>Teamverwaltung</h3>
<form class="team-create-form">
<div><input type="text" class="team-name" placeholder="Name" required></div>
<div><input type="text" class="team-role" placeholder="Rolle" required></div>
<div><input type="password" class="team-pass" placeholder="Passwort" required></div>
<div><input type="file" class="team-avatar" accept="image/png"></div>
<div><img id="avatar-preview" src="sunriserp.png" class="avatar"></div>
<button type="submit">Teamaccount erstellen</button>
</form>

<table class="team-accounts-table">
<thead><tr><th>Name</th><th>Rolle</th><th>Avatar</th><th>Bearbeiten</th></tr></thead>
<tbody></tbody>
</table>
</div>
</section>

<script>
// ================== Daten & localStorage ==================
let teamMembers = JSON.parse(localStorage.getItem('teamMembers')) || [];
let bewerbungen = JSON.parse(localStorage.getItem('bewerbungen')) || [];
let entbannungen = JSON.parse(localStorage.getItem('entbannungen')) || [];
let newsItems = JSON.parse(localStorage.getItem('newsItems')) || [];
let currentUser = null;

// TeamMember erstellen
const createTeamMember = (name, role, pass, avatar='sunriserp.png', permissions={teamAccounts:true, teamApps:true, fraktionApps:true, bans:true}) => ({name, role, pass, avatar, permissions});
// Bewerbung
const createBewerbung = (art, discord, minecraft, email, position, text) => ({ datum: new Date().toLocaleString(), art, discord, minecraft, email, position, text, notiz:'', status:'offen', bearbeiter:'' });
// Entbannung
const createEntbannung = (minecraft, discord, email, discordban, text) => ({ datum: new Date().toLocaleString(), minecraft, discord, email, discordban, text, notiz:'', status:'offen', bearbeiter:'' });
// News
const createNews = (bild, text) => ({ datum: new Date().toLocaleString(), bild, text });

// Standard-Leitung
if(!teamMembers.find(m => m.name === 'Leitung')){
    teamMembers.unshift(createTeamMember('Leitung','Leitung','Leitung123','sunriserp.png',{teamAccounts:true, teamApps:true, fraktionApps:true, bans:true}));
    localStorage.setItem('teamMembers', JSON.stringify(teamMembers));
}

// ================== Navigation ==================
function showSection(id){
    document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
}

// ================== Bewerbungsformular ==================
document.querySelector('.bewerbung-form').addEventListener('submit', e=>{
    e.preventDefault();
    const art = e.target.querySelector('.bewerbungs-art').value;
    const discord = e.target.querySelector('.bewerbung-discord').value;
    const minecraft = e.target.querySelector('.bewerbung-minecraft').value;
    const email = e.target.querySelector('.bewerbung-email').value;
    const position = e.target.querySelector('.bewerbung-position')?.value || '';
    const text = e.target.querySelector('.bewerbung-text').value;
    bewerbungen.push(createBewerbung(art,discord,minecraft,email,position,text));
    localStorage.setItem('bewerbungen',JSON.stringify(bewerbungen));
    e.target.reset();
    renderTeam();
    alert('Bewerbung abgesendet!');
});

// ================== Entbannungsformular ==================
document.querySelector('.entbannung-form').addEventListener('submit', e=>{
    e.preventDefault();
    const minecraft = e.target.querySelector('.entbannung-minecraft').value;
    const discord = e.target.querySelector('.entbannung-discord').value;
    const email = e.target.querySelector('.entbannung-email').value;
    const discordban = e.target.querySelector('.entbannung-discordban').checked;
    const text = e.target.querySelector('.entbannung-text').value;
    entbannungen.push(createEntbannung(minecraft,discord,email,discordban,text));
    localStorage.setItem('entbannungen',JSON.stringify(entbannungen));
    e.target.reset();
    renderTeam();
    alert('Entbannungsantrag abgesendet!');
});

// ================== Admin Login ==================
document.querySelector('.login-form').addEventListener('submit', e=>{
    e.preventDefault();
    const user = e.target.querySelector('.login-user').value;
    const pass = e.target.querySelector('.login-pass').value;
    const u = teamMembers.find(m=>m.name===user && m.pass===pass);
    if(u){
        currentUser = u;
        document.querySelector('.panel-content').style.display='block';
        renderPanel();
        alert('Erfolgreich eingeloggt!');
    } else alert('Falscher Benutzername oder Passwort!');
});

// ================== Teamformular Vorschau ==================
document.querySelector('.team-avatar').addEventListener('change', e=>{
    const file = e.target.files[0];
    if(file){
        const reader = new FileReader();
        reader.onload = ev=>document.getElementById('avatar-preview').src = ev.target.result;
        reader.readAsDataURL(file);
    }
});

// ================== Teamformular Erstellen ==================
document.querySelector('.team-create-form').addEventListener('submit', e=>{
    e.preventDefault();
    const name = e.target.querySelector('.team-name').value;
    const role = e.target.querySelector('.team-role').value;
    const pass = e.target.querySelector('.team-pass').value;
    const avatar = document.getElementById('avatar-preview').src;
    teamMembers.push(createTeamMember(name,role,pass,avatar));
    localStorage.setItem('teamMembers',JSON.stringify(teamMembers));
    e.target.reset();
    document.getElementById('avatar-preview').src='sunriserp.png';
    renderPanel();
    renderTeam();
});

// ================== Panel rendern ==================
function renderPanel(){
    // Bewerbungen
    const tbodyB = document.querySelector('.panel-bewerbungen tbody');
    tbodyB.innerHTML = '';
    bewerbungen.forEach((b,i)=>{
        tbodyB.innerHTML += `<tr>
        <td>${b.datum}</td><td>${b.art}</td><td>${b.discord}</td><td>${b.minecraft}</td><td>${b.email}</td>
        <td>${b.position || ''}</td><td>${b.text}</td>
        <td><input type="text" class="notiz-input" value="${b.notiz}" onchange="updateBewerbungNotiz(${i},this.value)"></td>
        <td><select class="status-select" onchange="updateBewerbungStatus(${i},this.value)">
            <option ${b.status==='offen'?'selected':''}>offen</option>
            <option ${b.status==='in Bearbeitung'?'selected':''}>in Bearbeitung</option>
            <option ${b.status==='abgelehnt'?'selected':''}>abgelehnt</option>
            <option ${b.status==='angenommen'?'selected':''}>angenommen</option>
        </select></td>
        <td>${b.bearbeiter}</td>
        </tr>`;
    });

    // Entbannungen
    const tbodyE = document.querySelector('.panel-entbannungen tbody');
    tbodyE.innerHTML = '';
    entbannungen.forEach((e,i)=>{
        tbodyE.innerHTML += `<tr>
        <td>${e.datum}</td><td>${e.minecraft}</td><td>${e.discord}</td><td>${e.email}</td>
        <td>${e.discordban?'Ja':'Nein'}</td><td>${e.text}</td>
        <td><input type="text" class="notiz-input" value="${e.notiz}" onchange="updateEntbannungNotiz(${i},this.value)"></td>
        <td><select class="status-select" onchange="updateEntbannungStatus(${i},this.value)">
            <option ${e.status==='offen'?'selected':''}>offen</option>
            <option ${e.status==='in Bearbeitung'?'selected':''}>in Bearbeitung</option>
            <option ${e.status==='abgelehnt'?'selected':''}>abgelehnt</option>
            <option ${e.status==='angenommen'?'selected':''}>angenommen</option>
        </select></td>
        <td>${e.bearbeiter}</td>
        </tr>`;
    });

    // Teamverwaltung
    const tbodyT = document.querySelector('.team-accounts-table tbody');
    tbodyT.innerHTML = '';
    teamMembers.forEach((m,i)=>{
        const canEdit = currentUser && (currentUser.permissions.teamAccounts || currentUser.role==='Leitung');
        tbodyT.innerHTML += `<tr>
        <td>${m.name}</td>
        <td>${m.role}</td>
        <td><img src="${m.avatar}" class="avatar"></td>
        <td>${m.name==='Leitung'?'':`<button class="action-btn" onclick="editTeam(${i})">Bearbeiten</button>`}</td>
        </tr>`;
    });
}

// ================== Team Aktionen ==================
function editTeam(i){
    const m = teamMembers[i];
    if(m.name==='Leitung') return alert('Leitung Account kann nicht bearbeitet werden!');
    const name = prompt('Name:',m.name);
    if(name) m.name = name;
    const role = prompt('Rolle:',m.role);
    if(role) m.role = role;
    const pass = prompt('Passwort:',m.pass);
    if(pass) m.pass = pass;
    localStorage.setItem('teamMembers',JSON.stringify(teamMembers));
    renderPanel();
    renderTeam();
}

// ================== Bewerbungsaktionen ==================
function updateBewerbungNotiz(i,val){ bewerbungen[i].notiz=val; localStorage.setItem('bewerbungen',JSON.stringify(bewerbungen)); }
function updateBewerbungStatus(i,val){ bewerbungen[i].status=val; bewerbungen[i].bearbeiter=currentUser.name; localStorage.setItem('bewerbungen',JSON.stringify(bewerbungen)); }

// ================== Entbannungsaktionen ==================
function updateEntbannungNotiz(i,val){ entbannungen[i].notiz=val; localStorage.setItem('entbannungen',JSON.stringify(entbannungen)); }
function updateEntbannungStatus(i,val){ entbannungen[i].status=val; entbannungen[i].bearbeiter=currentUser.name; localStorage.setItem('entbannungen',JSON.stringify(entbannungen)); }

// ================== Team Tabelle ==================
function renderTeam(){
    const tbody = document.querySelector('.team-table tbody');
    tbody.innerHTML = '';
    teamMembers.forEach(m=>tbody.innerHTML+=`<tr><td><img src="${m.avatar}" class="avatar"></td><td>${m.name}</td><td>${m.role}</td></tr>`);
}

// ================== Teambewerbung Feld ==================
function togglePositionField(){
    const val = document.querySelector('.bewerbungs-art').value;
    document.querySelector('.team-positionen').style.display = val==='Teambewerbung'?'block':'none';
}

// ================== Seite initial rendern ==================
renderTeam();
</script>
</body>
</html>
