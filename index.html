<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SunriseRP – Adminpanel</title>
<style>
  /* ----------------- GLOBAL ----------------- */
  body {
    font-family: 'Poppins', sans-serif;
    margin: 0;
    color: #fff;
    background: url('sunriserp.png') center/cover fixed no-repeat;
  }

  header {
    background: rgba(0,0,0,0.6);
    text-align: center;
    padding: 20px;
    font-size: 24px;
    letter-spacing: 2px;
    text-shadow: 0 0 10px #ffbb55;
  }

  nav {
    text-align: center;
    background: rgba(0,0,0,0.4);
    padding: 10px;
  }

  nav button {
    background: rgba(255,255,255,0.15);
    border: none;
    color: #fff;
    padding: 10px 20px;
    margin: 5px;
    border-radius: 5px;
    cursor: pointer;
    transition: 0.3s;
  }

  nav button:hover {
    background: rgba(255,200,120,0.4);
  }

  section {
    display: none;
    padding: 20px;
    margin: 20px auto;
    max-width: 1000px;
    background: rgba(0,0,0,0.55);
    border-radius: 10px;
  }

  section.active { display: block; }

  h2, h3 {
    text-align: center;
    color: #ffbb55;
    text-shadow: 0 0 10px #ffbb55;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    color: #fff;
  }

  th, td {
    border: 1px solid rgba(255,255,255,0.3);
    padding: 8px;
    text-align: center;
  }

  input, select, textarea, button {
    padding: 8px;
    border: none;
    border-radius: 4px;
    margin: 5px 0;
    font-family: inherit;
  }

  textarea { width: 95%; min-height: 60px; }

  .avatar { border-radius: 50%; width: 50px; height: 50px; object-fit: cover; }

  .save-btn, .login-form button {
    background: #ffbb55;
    color: #000;
    cursor: pointer;
  }

  .save-btn:hover, .login-form button:hover { background: #ffd480; }

  form > div { margin-bottom: 10px; }

  .team-accounts-table img { width:40px; height:40px; border-radius:50%; object-fit:cover; }

  .panel-content { margin-top: 20px; }

  button.action-btn {
    background: #ffbb55;
    color: #000;
    border-radius: 4px;
    padding: 6px 12px;
    cursor: pointer;
    transition: 0.3s;
  }
  button.action-btn:hover {
    background: #ffd480;
  }

  .permissions-btn {
    background: #ffbb55;
    color: #000;
    padding: 6px 12px;
    cursor: pointer;
    border-radius: 5px;
    margin-top: 5px;
  }

  .permissions-btn:hover {
    background: #ffd480;
  }
</style>
</head>
<body>

<header>☀️ Sunrise Roleplay – Minecraft RP auf hohem Niveau</header>

<nav>
  <button onclick="showSection('regelwerk')">Regelwerk</button>
  <button onclick="showSection('team')">Team</button>
  <button onclick="showSection('bewerbung')">Bewerbung</button>
  <button onclick="showSection('entbannung')">Entbannungsantrag</button>
  <button onclick="showSection('panel')">Admin Panel</button>
</nav>

<!-- ----------------- REGELWERK ----------------- -->
<section id="regelwerk" class="active">
  <h2>Regelwerk SunriseRP</h2>
  <pre style="white-space: pre-wrap; font-family: inherit;">
- OOC Talk verboten
- RDM/VDM verboten
- Fail RP vermeiden
- Diskriminierung verboten
- Alles IC
- Deutsch & Mikrofon
- Keine Zweitaccounts
- Bestechung verboten
- Unrealistische Wörter verboten
- Nur eigener Minecraft Account
- AFK rumstehen verboten
- Bugusing/Hacks verboten
- Support nicht ausnutzen
- Item-Erstattung nur mit Inventar sichtbar & Clip
- Realistisches Rauben
- Max 2 Räube/Tag
- Max 1500€ pro Geisel
- Ganggebiet = sofortiger Beschuss
- Waffen realistisch nutzen
- Servergespräche nicht im RP

Bei Fragen gerne im Support-Warteraum auf unserem Discord einfinden. Ein Supporter wird sich dann um dich kümmern! LG Fabian (;
  </pre>
</section>

<!-- ----------------- ADMIN PANEL ----------------- -->
<section id="panel">
  <h2>Admin Panel</h2>
  <form class="login-form">
    <div><input type="text" class="login-user" placeholder="Benutzername" required></div>
    <div><input type="password" class="login-pass" placeholder="Passwort" required></div>
    <button type="submit">Login</button>
  </form>

  <div class="panel-content" style="display:none;">
    <h3>Bewerbungen</h3>
    <button onclick="bulkBewerbungenSeen()">Alle auf 'gesehen' setzen</button>
    <table class="panel-bewerbungen">
      <thead>
        <tr>
          <th>Datum</th><th>Art</th><th>Discord</th><th>Minecraft</th><th>Email</th>
          <th>Position</th><th>Text</th><th>Notiz</th><th>Status</th><th>Bearbeitet von</th><th>Aktion</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <h3>Entbannungsanträge</h3>
    <table class="panel-entbannungen">
      <thead>
        <tr>
          <th>Datum</th><th>Minecraft</th><th>Discord</th><th>Email</th><th>Discord-Ban?</th><th>Text</th><th>Notiz</th><th>Status</th><th>Bearbeiter</th><th>Aktion</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <h3>Teamverwaltung</h3>
    <form class="team-create-form">
      <div><input type="text" class="team-name" placeholder="Name" required></div>
      <div><input type="text" class="team-role" placeholder="Rolle" required></div>
      <div><input type="password" class="team-pass" placeholder="Passwort" required></div>
      <div><input type="file" class="team-avatar" accept="image/*"></div>
      <div><img id="avatar-preview" src="sunriserp.png" class="avatar"></div>
      <div>
        <label><input type="checkbox" class="perm-apps" checked> Bewerbungen bearbeiten</label>
        <label><input type="checkbox" class="perm-bans" checked> Entbannungen bearbeiten</label>
        <label><input type="checkbox" class="perm-team" checked> Team löschen</label>
      </div>
      <button type="submit">Teamaccount erstellen</button>
    </form>
    <table class="team-accounts-table">
      <thead>
        <tr><th>Name</th><th>Rolle</th><th>Avatar</th><th>Aktion</th></tr>
      </thead>
      <tbody></tbody>
    </table>
    <button class="save-btn">Änderungen speichern</button>
  </div>
</section>

<script>
// ----------------- DATEN -----------------
let teamMembers = JSON.parse(localStorage.getItem('teamMembers')) || [];
let currentUser = null;

const createTeamMember = (name, role, pass, avatar='sunriserp.png', permissions={editApplications:true, editBans:true, assignRoles:true, deleteTeam:true}) => ({name, role, pass, avatar, permissions});

// Leitungskonto
if(!teamMembers.find(m => m.name === 'Leitung')){
  teamMembers.unshift(createTeamMember('Leitung','Leitung','L3!t@d#SunR1$e2025'));
  saveData();
}

/* ----------------- LOGIN ----------------- */
document.querySelector('.login-form').onsubmit = e => {
  e.preventDefault();
  const user = e.target.querySelector('.login-user').value.trim();
  const pass = e.target.querySelector('.login-pass').value.trim();
  const found = teamMembers.find(m => m.name === user && m.pass === pass);
  if(found){
    currentUser = found;
    alert(`Willkommen ${currentUser.name}!`);
    e.target.style.display = 'none';
    document.querySelector('.panel-content').style.display = 'block';
    renderPanel();
  } else { 
    alert('Falscher Benutzername oder Passwort!');
  }
};

/* ----------------- RENDER ----------------- */
function renderPanel(){
  const tbodyT = document.querySelector('.team-accounts-table tbody');
  tbodyT.innerHTML = '';
  teamMembers.forEach((m, i) => {
    tbodyT.innerHTML += `<tr>
      <td>${m.name}</td><td>${m.role}</td><td><img src="${m.avatar}" class="avatar"></td>
      <td><button class="permissions-btn" onclick="editPermissions(${i})">Berechtigungen</button></td>
    </tr>`;
  });
}

function editPermissions(i){
  const m = teamMembers[i];
  const perms = prompt(`Aktuelle Berechtigungen für ${m.name}:\nBewerbungen bearbeiten: ${m.permissions.editApplications ? 'Ja' : 'Nein'}\nEntbannungen bearbeiten: ${m.permissions.editBans ? 'Ja' : 'Nein'}\nTeam löschen: ${m.permissions.deleteTeam ? 'Ja' : 'Nein'}\nMöchten Sie Änderungen vornehmen? (Ja/Nein)`);
  if(perms.toLowerCase() === 'ja'){
    m.permissions.editApplications = confirm('Bewerbungen bearbeiten?');
    m.permissions.editBans = confirm('Entbannungen bearbeiten?');
    m.permissions.deleteTeam = confirm('Team löschen?');
    alert('Berechtigungen wurden geändert.');
    saveData();
}

function saveData(){
  localStorage.setItem('teamMembers',JSON.stringify(teamMembers));
  renderPanel();
}

/* ----------------- INIT ----------------- */
saveData();
renderPanel();
</script>

</body>
</html>
