<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SunriseRP – Adminpanel</title>
<style>
body {
  font-family: 'Poppins', sans-serif;
  margin: 0;
  color: #fff;
  background: url('sunriserp.png') center/cover fixed no-repeat;
}
header {
  background: rgba(0,0,0,0.6);
  text-align: center;
  padding: 20px;
  font-size: 24px;
  text-shadow: 0 0 10px #ffbb55;
}
nav {
  text-align: center;
  background: rgba(0,0,0,0.4);
  padding: 10px;
}
nav button {
  background: rgba(255,255,255,0.15);
  border: none;
  color: #fff;
  padding: 10px 20px;
  margin: 5px;
  border-radius: 5px;
  cursor: pointer;
  transition: 0.3s;
}
nav button:hover { background: rgba(255,200,120,0.4); }
section {
  display: none;
  padding: 20px;
  margin: 20px auto;
  max-width: 1000px;
  background: rgba(0,0,0,0.55);
  border-radius: 10px;
}
section.active { display: block; }
h2, h3 {
  text-align: center;
  color: #ffbb55;
  text-shadow: 0 0 10px #ffbb55;
}
table { width: 100%; border-collapse: collapse; color: #fff; }
th, td {
  border: 1px solid rgba(255,255,255,0.3);
  padding: 8px;
  text-align: center;
}
input, select, textarea, button {
  padding: 8px;
  border: none;
  border-radius: 4px;
  margin: 5px 0;
  font-family: inherit;
}
textarea { width: 95%; min-height: 60px; }
.avatar {
  border-radius: 50%;
  width: 50px;
  height: 50px;
  object-fit: cover;
}
.save-btn, .login-form button {
  background: #ffbb55;
  color: #000;
  cursor: pointer;
}
.save-btn:hover, .login-form button:hover { background: #ffd480; }
button.action-btn {
  background: #ffbb55;
  color: #000;
  border-radius: 4px;
  padding: 6px 12px;
  cursor: pointer;
  transition: 0.3s;
}
button.action-btn:hover { background: #ffd480; }
</style>
</head>
<body>

<header>☀️ Sunrise Roleplay – Minecraft RP auf hohem Niveau</header>
<nav>
  <button onclick="showSection('regelwerk')">Regelwerk</button>
  <button onclick="showSection('team')">Team</button>
  <button onclick="showSection('bewerbung')">Bewerbung</button>
  <button onclick="showSection('entbannung')">Entbannungsantrag</button>
  <button onclick="showSection('panel')">Admin Panel</button>
</nav>

<!-- Regelwerk -->
<section id="regelwerk" class="active">
  <h2>Regelwerk SunriseRP</h2>
  <pre style="white-space: pre-wrap; font-family: inherit;">
- Kein RDM/VDM
- Kein OOC Talk
- Keine Beleidigungen
- Kein FailRP
- Realistisch spielen
  </pre>
</section>

<!-- Team -->
<section id="team">
  <h2>Team</h2>
  <table class="team-table">
    <thead><tr><th>Avatar</th><th>Name</th><th>Rolle</th></tr></thead>
    <tbody></tbody>
  </table>
</section>

<!-- Bewerbung -->
<section id="bewerbung">
  <h2>Bewerbung einreichen</h2>
  <form class="bewerbung-form">
    <div>
      <select class="bewerbungs-art" required>
        <option value="Fraktionsbewerbung">Fraktionsbewerbung</option>
        <option value="Teambewerbung">Teambewerbung</option>
      </select>
    </div>
    <div><input type="text" class="bewerbung-discord" placeholder="Discord Name" required></div>
    <div><input type="text" class="bewerbung-minecraft" placeholder="Minecraft Name" required></div>
    <div><input type="email" class="bewerbung-email" placeholder="E-Mail" required></div>
    <div><textarea class="bewerbung-text" placeholder="Bewerbungstext" required></textarea></div>
    <button type="submit">Absenden</button>
  </form>
</section>

<!-- Entbannungsantrag -->
<section id="entbannung">
  <h2>Entbannungsantrag</h2>
  <form class="entbannung-form">
    <div><input type="text" class="entbannung-minecraft" placeholder="Minecraft Name" required></div>
    <div><input type="text" class="entbannung-discord" placeholder="Discord Name" required></div>
    <div><input type="email" class="entbannung-email" placeholder="E-Mail" required></div>
    <div><label><input type="checkbox" class="entbannung-discordban"> Auch vom Discord gebannt?</label></div>
    <div><textarea class="entbannung-text" placeholder="Begründung" required></textarea></div>
    <button type="submit">Absenden</button>
  </form>
</section>

<!-- Admin Panel -->
<section id="panel">
  <h2>Admin Panel</h2>
  <form class="login-form">
    <div><input type="text" class="login-user" placeholder="Benutzername" required></div>
    <div><input type="password" class="login-pass" placeholder="Passwort" required></div>
    <button type="submit">Login</button>
  </form>

  <div class="panel-content" style="display:none;">
    <h3>Teamverwaltung</h3>
    <form class="team-create-form">
      <div><input type="text" class="team-name" placeholder="Name" required></div>
      <div><input type="text" class="team-role" placeholder="Rolle" required></div>
      <div><input type="password" class="team-pass" placeholder="Passwort" required></div>
      <div><input type="file" class="team-avatar" accept="image/*"></div>
      <button type="submit">Teamaccount erstellen</button>
    </form>

    <table class="team-accounts-table">
      <thead><tr><th>Name</th><th>Rolle</th><th>Avatar</th><th>Aktion</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>
</section>

<script>
let teamMembers = JSON.parse(localStorage.getItem('teamMembers')) || [];
let currentUser = null;

const createTeamMember = (name, role, pass, avatar='sunriserp.png', permissions={editApplications:false, editBans:false, deleteTeam:false}) =>
  ({name, role, pass, avatar, permissions});

if(!teamMembers.find(m => m.name === 'Leitung')){
  teamMembers.unshift(createTeamMember('Leitung','Leitung','L3!t@d#SunR1$e2025','sunriserp.png',
    {editApplications:true, editBans:true, deleteTeam:true}));
  saveData();
}

function showSection(id){
  document.querySelectorAll('section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
}

document.querySelector('.login-form').addEventListener('submit', e=>{
  e.preventDefault();
  const user = document.querySelector('.login-user').value;
  const pass = document.querySelector('.login-pass').value;
  const found = teamMembers.find(m=>m.name===user && m.pass===pass);
  if(found){
    currentUser = found;
    document.querySelector('.login-form').style.display='none';
    document.querySelector('.panel-content').style.display='block';
    renderPanel();
  } else {
    alert('Falsche Zugangsdaten!');
  }
});

function renderTeam(){
  const tbody = document.querySelector('.team-table tbody');
  tbody.innerHTML='';
  teamMembers.forEach(m=>{
    tbody.innerHTML+=`<tr><td><img src="${m.avatar}" class="avatar"></td><td>${m.name}</td><td>${m.role}</td></tr>`;
  });
}

function renderPanel(){
  const tbody=document.querySelector('.team-accounts-table tbody');
  tbody.innerHTML='';
  teamMembers.forEach((m,i)=>{
    tbody.innerHTML+=`
      <tr>
        <td>${m.name}</td>
        <td>${m.role}</td>
        <td><img src="${m.avatar}" class="avatar"></td>
        <td><button class="action-btn" onclick="editPermissions(${i})">Berechtigungen</button></td>
      </tr>`;
  });
}

document.querySelector('.team-create-form').addEventListener('submit',e=>{
  e.preventDefault();
  const name=document.querySelector('.team-name').value;
  const role=document.querySelector('.team-role').value;
  const pass=document.querySelector('.team-pass').value;
  const file=document.querySelector('.team-avatar').files[0];
  let avatar='sunriserp.png';
  if(file){ avatar=URL.createObjectURL(file);}
  teamMembers.push(createTeamMember(name,role,pass,avatar));
  saveData(); renderPanel(); e.target.reset();
});

function editPermissions(i){
  const m=teamMembers[i];
  if(currentUser.role!=='Leitung'){return alert('Nur Leitung darf Berechtigungen ändern!');}
  m.permissions.editApplications=confirm('Bewerbungen bearbeiten erlauben?');
  m.permissions.editBans=confirm('Entbannungen bearbeiten erlauben?');
  m.permissions.deleteTeam=confirm('Team löschen erlauben?');
  alert('Berechtigungen aktualisiert!');
  saveData();
}

function saveData(){
  localStorage.setItem('teamMembers',JSON.stringify(teamMembers));
  renderTeam();
}

renderTeam();
</script>
</body>
</html>
