<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>SunriseRP – Adminpanel</title>
<style>
/* ----------------- GLOBAL ----------------- */
body {
  font-family: 'Poppins', sans-serif;
  margin: 0;
  color: #fff;
  background: url('sunriserp.png') center/cover fixed no-repeat;
}

header {
  background: rgba(0,0,0,0.6);
  text-align: center;
  padding: 20px;
  font-size: 24px;
  letter-spacing: 2px;
  text-shadow: 0 0 10px #ffbb55;
}

nav {
  text-align: center;
  background: rgba(0,0,0,0.4);
  padding: 10px;
}

nav button {
  background: rgba(255,255,255,0.15);
  border: none;
  color: #fff;
  padding: 10px 20px;
  margin: 5px;
  border-radius: 5px;
  cursor: pointer;
  transition: 0.3s;
}

nav button:hover {
  background: rgba(255,200,120,0.4);
}

section {
  display: none;
  padding: 20px;
  margin: 20px auto;
  max-width: 1000px;
  background: rgba(0,0,0,0.55);
  border-radius: 10px;
}

section.active { display: block; }

h2, h3 {
  text-align: center;
  color: #ffbb55;
  text-shadow: 0 0 10px #ffbb55;
}

table {
  width: 100%;
  border-collapse: collapse;
  color: #fff;
}

th, td {
  border: 1px solid rgba(255,255,255,0.3);
  padding: 8px;
  text-align: center;
}

input, select, textarea, button {
  padding: 8px;
  border: none;
  border-radius: 4px;
  margin: 5px 0;
  font-family: inherit;
}

textarea { width: 95%; min-height: 60px; }

.avatar { border-radius: 50%; width: 50px; }

.save-btn, .login-form button {
  background: #ffbb55;
  color: #000;
  cursor: pointer;
}

.save-btn:hover, .login-form button:hover { background: #ffd480; }

form > div { margin-bottom: 10px; }

.team-accounts-table img { width:40px; height:40px; border-radius:50%; object-fit:cover; }

.panel-content { margin-top: 20px; }
</style>
</head>
<body>

<header>☀️ Sunrise Roleplay – Minecraft RP auf hohem Niveau</header>

<nav>
  <button onclick="showSection('regelwerk')">Regelwerk</button>
  <button onclick="showSection('team')">Team</button>
  <button onclick="showSection('bewerbung')">Bewerbung</button>
  <button onclick="showSection('entbannung')">Entbannungsantrag</button>
  <button onclick="showSection('panel')">Admin Panel</button>
</nav>

<!-- ----------------- REGELWERK ----------------- -->
<section id="regelwerk" class="active">
  <h2>Regelwerk SunriseRP</h2>
  <pre style="white-space: pre-wrap; font-family: inherit;">
- OOC Talk verboten
- RDM/VDM verboten
- Fail RP vermeiden
- Diskriminierung verboten
- Alles IC
- Deutsch & Mikrofon
- Keine Zweitaccounts
- Bestechung verboten
- Unrealistische Wörter verboten
- Nur eigener Minecraft Account
- AFK rumstehen verboten
- Bugusing/Hacks verboten
- Support nicht ausnutzen
- Item-Erstattung nur mit Inventar sichtbar & Clip
- Realistisches Rauben
- Max 2 Räube/Tag
- Max 1500€ pro Geisel
- Ganggebiet = sofortiger Beschuss
- Waffen realistisch nutzen
- Servergespräche nicht im RP

Bei Fragen gerne im Support-Warteraum auf Discord. LG Fabian (:
  </pre>
</section>

<!-- ----------------- TEAM ----------------- -->
<section id="team">
  <h2>Teammitglieder</h2>
  <table class="team-table">
    <thead>
      <tr><th>Avatar</th><th>Name</th><th>Rolle</th></tr>
    </thead>
    <tbody></tbody>
  </table>
</section>

<!-- ----------------- BEWERBUNG ----------------- -->
<section id="bewerbung">
  <h2>Bewerbung einreichen</h2>
  <form class="bewerbung-form">
    <div>
      <select class="bewerbungs-art" required onchange="togglePositionField()">
        <option value="Fraktionsbewerbung">Fraktionsbewerbung</option>
        <option value="Teambewerbung">Teambewerbung</option>
      </select>
    </div>
    <div class="team-positionen" style="display:none;">
      <select class="bewerbung-position" required>
        <option value="Developer">Developer</option>
        <option value="Supporter">Supporter</option>
        <option value="Builder">Builder</option>
        <option value="Designer">Designer</option>
        <option value="Content Creator">Content Creator</option>
      </select>
    </div>
    <div><input type="text" class="bewerbung-discord" placeholder="Discord Name" required></div>
    <div><input type="text" class="bewerbung-minecraft" placeholder="Minecraft Name" required></div>
    <div><input type="email" class="bewerbung-email" placeholder="E-Mail" required></div>
    <div><textarea class="bewerbung-text" placeholder="Bewerbungstext" required></textarea></div>
    <button type="submit">Absenden</button>
  </form>
</section>

<!-- ----------------- ENTBANNUNG ----------------- -->
<section id="entbannung">
  <h2>Entbannungsantrag</h2>
  <form class="entbannung-form">
    <div><input type="text" class="entbannung-minecraft" placeholder="Minecraft Name" required></div>
    <div><input type="text" class="entbannung-discord" placeholder="Discord Name" required></div>
    <div><input type="email" class="entbannung-email" placeholder="E-Mail" required></div>
    <div>
      <label><input type="checkbox" class="entbannung-discordban"> Auch vom Discord gebannt?</label>
    </div>
    <div><textarea class="entbannung-text" placeholder="Begründung" required></textarea></div>
    <button type="submit">Absenden</button>
  </form>
</section>

<!-- ----------------- ADMIN PANEL ----------------- -->
<section id="panel">
  <h2>Admin Panel</h2>
  <form class="login-form">
    <div><input type="text" class="login-user" placeholder="Benutzername" required></div>
    <div><input type="password" class="login-pass" placeholder="Passwort" required></div>
    <button type="submit">Login</button>
  </form>

  <div class="panel-content" style="display:none;">
    <!-- Bewerbungen -->
    <h3>Bewerbungen</h3>
    <button onclick="bulkBewerbungenSeen()">Alle auf 'gesehen' setzen</button>
    <table class="panel-bewerbungen">
      <thead>
        <tr>
          <th>Datum</th><th>Art</th><th>Discord</th><th>Minecraft</th><th>Email</th>
          <th>Position</th><th>Text</th><th>Notiz</th><th>Status</th><th>Bearbeitet von</th><th>Aktion</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <!-- Entbannungen -->
    <h3>Entbannungsanträge</h3>
    <table class="panel-entbannungen">
      <thead>
        <tr>
          <th>Datum</th><th>Minecraft</th><th>Discord</th><th>Email</th><th>Discord-Ban?</th><th>Text</th><th>Notiz</th><th>Status</th><th>Bearbeiter</th><th>Aktion</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <!-- Teamverwaltung -->
    <h3>Teamverwaltung</h3>
    <form class="team-create-form">
      <div><input type="text" class="team-name" placeholder="Name" required></div>
      <div><input type="text" class="team-role" placeholder="Rolle" required></div>
      <div><input type="password" class="team-pass" placeholder="Passwort" required></div>
      <div><input type="file" class="team-avatar" accept="image/*"></div>
      <div><img id="avatar-preview" src="sunriserp.png" class="avatar"></div>
      <div>
        <label><input type="checkbox" class="perm-apps" checked> Bewerbungen bearbeiten</label>
        <label><input type="checkbox" class="perm-bans" checked> Entbannungen bearbeiten</label>
        <label><input type="checkbox" class="perm-team" checked> Team löschen</label>
      </div>
      <button type="submit">Teamaccount erstellen</button>
    </form>
    <table class="team-accounts-table">
      <thead>
        <tr><th>Name</th><th>Rolle</th><th>Avatar</th><th>Aktion</th></tr>
      </thead>
      <tbody></tbody>
    </table>
    <button class="save-btn">Änderungen speichern</button>
  </div>
</section>

<script>
/* ----------------- DATEN ----------------- */
let teamMembers = JSON.parse(localStorage.getItem('teamMembers')) || [];
let bewerbungen = JSON.parse(localStorage.getItem('bewerbungen')) || [];
let entbannungen = JSON.parse(localStorage.getItem('entbannungen')) || [];
let currentUser = null;

const createTeamMember = (name, role, pass, avatar='sunriserp.png', permissions={editApplications:true, editBans:true, assignRoles:true, deleteTeam:true}) => ({name, role, pass, avatar, permissions});
const createBewerbung = (art, discord, minecraft, email, position, text) => ({
  datum: new Date().toLocaleString(), art, discord, minecraft, email, position, text, notiz:'', status:'offen', bearbeiter:''
});
const createEntbannung = (minecraft, discord, email, discordban, text) => ({
  datum: new Date().toLocaleString(), minecraft, discord, email, discordban, text, notiz:'', status:'offen', bearbeiter:''
});

// Leitungskonto
if(!teamMembers.find(m => m.name === 'Leitung')){
  teamMembers.unshift(createTeamMember('Leitung','Leitung','L3!t@d#SunR1$e2025'));
  saveData();
}

/* ----------------- NAVIGATION ----------------- */
function showSection(id){
  document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  window.location.hash = id;
}
if(window.location.hash) showSection(window.location.hash.substring(1));

/* ----------------- RENDER ----------------- */
function renderTeam(){
  const tbody = document.querySelector('.team-table tbody');
  tbody.innerHTML = '';
  teamMembers.forEach(m => {
    tbody.innerHTML += `<tr><td><img src="${m.avatar}" class="avatar"></td><td>${m.name}</td><td>${m.role}</td></tr>`;
  });
}

function renderPanel(){
  const tbodyB = document.querySelector('.panel-bewerbungen tbody');
  tbodyB.innerHTML = '';
  bewerbungen.forEach((b,i)=>{
    tbodyB.innerHTML += `<tr>
      <td>${b.datum}</td><td>${b.art}</td><td>${b.discord}</td><td>${b.minecraft}</td><td>${b.email}</td>
      <td>${b.position||''}</td><td>${b.text}</td><td>${b.notiz}</td><td>${b.status}</td><td>${b.bearbeiter}</td>
      <td><button onclick="editBewerbung(${i})">Bearbeiten</button></td>
    </tr>`;
  });

  const tbodyE = document.querySelector('.panel-entbannungen tbody');
  tbodyE.innerHTML = '';
  entbannungen.forEach((e,i)=>{
    tbodyE.innerHTML += `<tr>
      <td>${e.datum}</td><td>${e.minecraft}</td><td>${e.discord}</td><td>${e.email}</td><td>${e.discordban?'Ja':'Nein'}</td>
      <td>${e.text}</td><td>${e.notiz}</td><td>${e.status}</td><td>${e.bearbeiter}</td>
      <td><button onclick="editEntbannung(${i})">Bearbeiten</button></td>
    </tr>`;
  });

  const tbodyT = document.querySelector('.team-accounts-table tbody');
  tbodyT.innerHTML = '';
  teamMembers.forEach((m,i)=>{
    tbodyT.innerHTML += `<tr>
      <td>${m.name}</td><td>${m.role}</td><td><img src="${m.avatar}" class="avatar"></td>
      <td><button onclick="deleteTeam(${i})">Löschen</button></td>
    </tr>`;
  });
}

function saveData(){
  localStorage.setItem('teamMembers',JSON.stringify(teamMembers));
  localStorage.setItem('bewerbungen',JSON.stringify(bewerbungen));
  localStorage.setItem('entbannungen',JSON.stringify(entbannungen));
  renderTeam();
  renderPanel();
}

/* ----------------- FORM HANDLER ----------------- */
document.querySelector('.bewerbung-form').onsubmit = e=>{
  e.preventDefault();
  const art = e.target.querySelector('.bewerbungs-art').value;
  const position = e.target.querySelector('.bewerbung-position')?.value || '';
  const discord = e.target.querySelector('.bewerbung-discord').value;
  const minecraft = e.target.querySelector('.bewerbung-minecraft').value;
  const email = e.target.querySelector('.bewerbung-email').value;
  const text = e.target.querySelector('.bewerbung-text').value;
  bewerbungen.push(createBewerbung(art,discord,minecraft,email,position,text));
  saveData();
  alert('Bewerbung eingereicht!');
  e.target.reset();
};

document.querySelector('.entbannung-form').onsubmit = e=>{
  e.preventDefault();
  const minecraft = e.target.querySelector('.entbannung-minecraft').value;
  const discord = e.target.querySelector('.entbannung-discord').value;
  const email = e.target.querySelector('.entbannung-email').value;
  const discordban = e.target.querySelector('.entbannung-discordban').checked;
  const text = e.target.querySelector('.entbannung-text').value;
  entbannungen.push(createEntbannung(minecraft,discord,email,discordban,text));
  saveData();
  alert('Entbannungsantrag eingereicht!');
  e.target.reset();
};

function togglePositionField(){
  const art = document.querySelector('.bewerbungs-art').value;
  document.querySelector('.team-positionen').style.display = art==='Teambewerbung'?'block':'none';
}

/* ----------------- LOGIN ----------------- */
document.querySelector('.login-form').onsubmit = e=>{
  e.preventDefault();
  const user = e.target.querySelector('.login-user').value;
  const pass = e.target.querySelector('.login-pass').value;
  const member = teamMembers.find(m=>m.name===user && m.pass===pass);
  if(member){
    currentUser = member;
    document.querySelector('.panel-content').style.display='block';
    e.target.style.display='none';
    renderPanel();
  } else { alert('Falscher Benutzername oder Passwort!'); }
};

/* ----------------- ADMIN AKTIONEN ----------------- */
function editBewerbung(i){
  const b = bewerbungen[i];
  const notiz = prompt('Notiz:',b.notiz);
  if(notiz!==null) b.notiz = notiz;
  const status = prompt('Status (offen/gesehen/angenommen/abgelehnt):',b.status);
  if(status) b.status = status;
  b.bearbeiter = currentUser.name;
  saveData();
}

function editEntbannung(i){
  const e = entbannungen[i];
  const notiz = prompt('Notiz:',e.notiz);
  if(notiz!==null) e.notiz = notiz;
  const status = prompt('Status (offen/gesehen/angenommen/abgelehnt):',e.status);
  if(status) e.status = status;
  e.bearbeiter = currentUser.name;
  saveData();
}

function deleteTeam(i){
  if(confirm('Teammitglied wirklich löschen?')){
    teamMembers.splice(i,1);
    saveData();
  }
}

function bulkBewerbungenSeen(){
  bewerbungen.forEach(b=>{ b.status='gesehen'; b.bearbeiter=currentUser.name; });
  saveData();
}

/* ----------------- AVATAR PREVIEW ----------------- */
document.querySelector('.team-avatar').onchange = e=>{
  const file = e.target.files[0];
  if(file){
    const reader = new FileReader();
    reader.onload = ()=> document.getElementById('avatar-preview').src = reader.result;
    reader.readAsDataURL(file);
  }
};

/* Initial render */
saveData();
</script>

</body>
</html>
